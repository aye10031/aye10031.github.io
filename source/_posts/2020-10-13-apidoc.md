---
layout: post

title: "搬运组数据库API说明"

date: 2020-10-13

tag: 教程
---


# 搬运组API说明文档

仅供组内相应开发使用。

需要验证密钥，密钥请在群内私聊我。

API链接：[http://api.aye10032.com:5000/](http://api.aye10032.com:5000/)

## 获取信息（GET）

### videos

|    字段    | 类型 | 必填  |                             说明                             |
| :--------: | :--: | :---: | :----------------------------------------------------------: |
|     id     | int  | false | 视频对应的ID，若填写则**无视下面所有字段**，直接返回该ID对应的视频信息 |
|  has_done  | int  | true  |     **0**：返回未完工的视频列表  **1**：返回所有视频列表     |
| need_trans | int  | true  | **0**：返回所有未完工视频信息 **1**：返回需要翻译的视频列表  |



**返回值**

|  返回字段   |  类型  |                    说明                     |
| :---------: | :----: | :-----------------------------------------: |
|     ID      |  int   |         视频ID，每个视频的唯一标识          |
|     URL     | string |                视频的源链接                 |
|   HASDONE   |  int   |         **0**：未完工 **1**：已完工         |
|  NEEDTRANS  |  int   |      **0**：不需要翻译 **1**：需要翻译      |
|   ISTRANS   |  int   | **0**：未开始翻译 **1**：已有人开始承接翻译 |
|   FROMEQQ   |  int   |              添加此视频的QQ号               |
| DESCRIPTION | string |             对此视频搬运的描述              |
|    TIME     |  date  |         搬运（翻译）需求添加的时间          |



### translate

| 字段 | 类型 | 必填 |          说明          |
| :--: | :--: | :--: | :--------------------: |
|  id  | int  | true | 需要查询的**视频的ID** |

**返回值**

| 返回字段 |  类型  |               说明               |
| :------: | :----: | :------------------------------: |
|  FROMID  |  int   |      该翻译信息所属视频的ID      |
|  FROMQQ  |  int   |           翻译承接人QQ           |
|   MSG    | string | 翻译承接人备注信息（承接时间段） |
|   TIME   |  date  |           信息添加时间           |





## 修改信息



### new_video

|    字段     |  类型  | 必填 |               说明                |
| :---------: | :----: | :--: | :-------------------------------: |
|     url     | string | true |             视频链接              |
| description | string | true |             搬运描述              |
| need_trans  |  int   | true | **0**：不需要翻译 **1**：需要翻译 |
|   from_qq   |  int   | true |         添加此视频的QQ号          |
|     key     | string | true |            密钥字符串             |



**返回值**

- 200 添加成功
- 401 密钥验证错误



### update

|   字段   |  类型  | 必填 |                    说明                     |
| :------: | :----: | :--: | :-----------------------------------------: |
|    id    | string | true |           需要修改的**视频的ID**            |
| has_done |  int   | true |         **0**：未完工 **1**：已完工         |
| is_trans |  int   | true | **0**：未开始翻译 **1**：已有人开始承接翻译 |
|   key    | string | true |                 密钥字符串                  |

